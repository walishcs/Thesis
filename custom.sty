% 縮寫 %
\usepackage{xspace}
\newcommand{\pan}{\textsc{PAn}\xspace}
\newcommand{\panf}{Proto-Austronesian\xspace}

\newcommand{\paic}{\textsc{PAic}\xspace}
\newcommand{\paicf}{Proto-Atayalic\xspace}

\newcommand{\pata}{\textsc{PAta}\xspace}
\newcommand{\pataf}{Proto-Atayal\xspace}
\newcommand{\ata}{\textsc{Ata}\xspace}

\newcommand{\psed}{\textsc{PSed}\xspace}
\newcommand{\sed}{\textsc{Sed}\xspace}
\newcommand{\psedf}{Proto-Seediq\xspace}

\newcommand{\stg}{\textsc{Tg}\xspace}
\newcommand{\stgf}{Tgdaya\xspace}

\newcommand{\ptotr}{\textsc{PTo-Tr}\xspace}
\newcommand{\ptotrf}{Proto-Toda-Truku\xspace}
\newcommand{\totrf}{Toda-Truku\xspace}

\newcommand{\sto}{\textsc{PTo}\xspace}
\newcommand{\stof}{Proto-Toda\xspace}

\newcommand{\scto}{\textsc{CTo}\xspace}
\newcommand{\sctof}{Central Toda\xspace}

\newcommand{\seto}{\textsc{ETo}\xspace}
\newcommand{\setof}{Eastern Toda\xspace}

\newcommand{\ptr}{\textsc{PTr}\xspace}
\newcommand{\ptrf}{Proto-Truku\xspace}

\newcommand{\sctr}{\textsc{CTr}\xspace}
\newcommand{\sctrf}{Central Truku\xspace}

\newcommand{\setr}{\textsc{ETr}\xspace}
\newcommand{\setrf}{Eastern Truku\xspace}

\newcommand{\xb}[1]{\textsubscript{#1}}
% 縮寫 %

% subsubsection 以下層級 %
\usepackage{titlesec}
\usepackage{hyperref}
\hypersetup{hidelinks}

\titleclass{\subsubsubsection}{straight}[\subsection]

\newcounter{subsubsubsection}[subsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsection.\arabic{paragraph}} % optional; useful if paragraphs are to be numbered

\titleformat{\subsubsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsection}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}%
  {3.25ex \@plus1ex \@minus.2ex}%
  {-1em}%
  {\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}%
  {3.25ex \@plus1ex \@minus .2ex}%
  {-1em}%
  {\normalfont\normalsize\bfseries}}
\def\toclevel@subsubsubsection{4}
\def\toclevel@paragraph{5}
\def\toclevel@paragraph{6}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
\makeatother

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{3}
% subsubsection 以下層級 %

% Bibliography
\usepackage[backend=biber, style=authoryear-comp, dashed=false, maxcitenames=2, maxbibnames=99]{biblatex}
\addbibresource{ref.bib} %Import the bibliography file
\renewcommand*{\nameyeardelim}{\space}
\renewcommand*{\postnotedelim}{\addcolon\space}
\renewcommand*{\bibpagespunct}{\addcolon\space}
\DefineBibliographyStrings{english}{%
  page             = {},
  pages            = {},
} 
%\renewcommand*{\bibfont}{\footnotesize}

\newcommand{\sameyear}[1]{}

\usepackage{xpatch}
\AtEveryBibitem{\clearfield{month}}
\AtEveryCitekey{\clearfield{month}}
\xpatchbibmacro{date+extradate}{%
  \printtext[parens]%
}{%
  \setunit{\addperiod\space}%
  \printtext%
}{}{}

\NewBibliographyString{toappear}
\DefineBibliographyStrings{english}{%
  toappear = {to appear},
}

%Add comma between two authors in bibliography only
\AtBeginBibliography{\renewcommand*{\finalnamedelim}{
  \finalandcomma
  \addspace\bibstring{and}\space}  
 }

\DeclareFieldFormat[article,inproceedings,misc,inbook,incollection]{citetitle}{#1}
\DeclareFieldFormat[article,inproceedings,misc,inbook,incollection]{title}{#1}
\DeclareFieldFormat[thesis]{title}{\mkbibemph{#1}}
\DeclareFieldFormat[article,book,inproceedings,misc,inbook,incollection,thesis]{addendum}{#1\nopunct}
\DeclareFieldFormat[article,inproceedings,misc,inbook,incollection,thesis]{volume}{#1}
\renewbibmacro{in:}{}

\DefineBibliographyStrings{american}{phdthesis = {PhD dissertation}}
\urlstyle{same}

%%END Bibliography Setup%%